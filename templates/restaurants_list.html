{% extends "restaurants.html" %}
{% block content %}
{{ super() }}

<link rel="stylesheet" href="/static/bootstrap_dropdown.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.js"></script>

<br>
<div class="container">
    <div class="row">
        <form action="/restaurants/search" method="POST"> 

            <div class="dropdown" style="float: left">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width: 10em">
                    <span>Kategoria</span>
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu checkbox-menu allow-focus" aria-labelledby="dropdownMenu1">
                    {% for c in categories %}
                    <li >
                        <label>
                            <input type="checkbox" name="categories" value="{{ c.id }}" {% if c.id in selected_categories %}{{ 'checked' }}{% endif %}> {{ c.name }}
                        </label>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div style="float: left; margin-left:1em">   
                Kaupunki: <input type="text" name="city" size="17.5" value="{{city}}">
            </div>
            <div style="float: left; margin-left:1em">  
                Sana: <input type="text" name="description" size="17.5" value="{{search_text}}">
            </div> 

            <div style="float: left; margin-left:1em">
                <input type="submit" value="Hae" style="width:8em;" class="btn btn-primary">
            </div>
        </form>

    </div>  
    <br>
    <div class="row">
        <form action="/restaurants" method="GET">
            <input type="submit" value="Poista rajaukset" class="btn btn-warning">
        </form>
    </div>
</div>


<hr>
<br>
<table class="table accordion table-striped table-hover">
<col width="25%">
<col width="25%">
<col width="25%">


    <tr>
        <th>Ravintola</th>
        <th>Osoite</th>
        <th>Aukioloajat</th>
        {% if session.get("username", None) %}
        <th></th>
        {% endif %}
    </tr>

    {% for r in restaurants %}
    <tr>
        <td><a href="/restaurants/{{ r.id }}">{{ r.name }}</a></td>
        <td>{{ r.location.street }}, {{ r.location.city }}</td>
        <td>{{ r.opening_hours }}</td>
        {% if session.get("username", None) %}
        <td align="right">
            <a href="/ratings/new/{{ r.id }}">Arvostele</a>
            {% if session.get("admin", False) %}
            &nbsp;<a href="/restaurants/{{ r.id }}/edit">Muokkaa</a>
            {% endif %}
        </td>  
        {% endif %}
    </tr>
    {% endfor %}

</table>

<script src="{{ url_for('static', filename='checkboxes.js') }}"></script>

{% endblock %}